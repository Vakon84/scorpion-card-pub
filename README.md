## Контроллер периферии для ретро-компьютера Scorpion ZS-256

          
## Ревизия А:

ВНИМАНИЕ!!! Эта ревизия НЕ РЕКОМЕНДУЕТСЯ К ИЗГОТОВЛЕНИЮ. К сожалению, при проектировании был выбран микроконтроллер не позволяющий реализовать все желаемое по причине нехватки ОЗУ. Готовится к публикации ревизия B, в которой эта проблема устранена.


Подключается к разъему периферии платы компьютера. Позволяет использовать USB клавиатуры, мыши, джойстики, геймпады.

<img src="https://user-images.githubusercontent.com/27000982/174107474-69f595be-d761-4b62-9f65-0c8bccec0c96.jpg" width="400" >

## Ревизия С:
                 
Автономный контроллер USB клавиатуры и геймпада. Не привязан к разъему Scorpion и может
быть использован с любым Spectrum совместимым компьютером, использующим стандартную ZX клавиатуру, но
не имеет поддержки Kempston Mouse и возможностей, обеспечиваемых периферийным разъемом ZS-Scorpion за исключением
клавиатуры и Kempston джойстика.

<img src="https://user-images.githubusercontent.com/27000982/211162365-2488c57a-c85b-4176-8bae-3781c7c2bac0.jpg" width="400" >

## Уже реализовано:
- USB-хост: поддержка клавиатур, HID мышей, HID джойстиков/геймпадов, USB хабов
- USB-устройство: подключается к PC (сейчас для отладки), возможно взаимодействие PC со Spectrum
- Безвейтовая ZX-клавиатура с произвольными раскладками (в ПЗУ)
- Reset, Magic с клавиатуры
- USB джойстик превращается на Kempston Joystick
- Регенерация синхросмеси. Никаких больше перемычек/разрезов на плате. PAL кодер теперь дает нормальный цветной сигнал
- С доп. платой (в слот шины) USB мышь превращается в Kempston mouse
- Транзитом передает на гребенки: RGB сигнал (с выбором джампером оригинальная/регенерированная синхросмесь), стерео-аудио, моно-аудио, оригинальный видео сигнал, магнитофонный вход/выход
- Единая точка подключения питания
- Транзитное подключение внешнего джойстика (от Spectrum)
- Настраиваемое отображение кнопок USB джойстика на кнопки ZX клавиатуры/Kempston Joystick
- Управление/индикация на клавиатуре турбой через двухпиновую колодку скорпиона
         

### Планируется:
- Поддержка нескольких джойстиков/геймпадов
- Проигрыватель tap/tzx с PC через USB порт в Спектрум (`LOAD ""`)
- Захват centronix
- Настройки контроллера (раскладки, мышь, джойстик) через доп. плату нативным приложением для скорпиона

### Недостатки: :smile:
- Нет передачи с RS232 Скорпиона
- Нет поддержки PS/2 мышей и клавиатур

## Содержимое репозитория:
### revA
- ext - Прошивка доп. платы
- kbd - Прошивка клавиатурной матрицы + Kempston joystick
- sync - Прошивка регенератора синхросмеси + моста centronix + транслятора напряжения
- kicad - Проект плат
- atmega - Прошивка управляющего контроллера (пока неполная)
        
### revC
- kbd - Прошивка клавиатурной матрицы
- kicad - Проект плат
- atmega - Прошивка управляющего контроллера
